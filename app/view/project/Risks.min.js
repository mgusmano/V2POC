Ext.define("V2POC.view.project.Risks",{extend:"Ext.Container",id:"theRiskMatrix",requires:["Ext.dataview.DataView","Ext.data.Store"],xtype:"risks",initialize:function(){this.create()},create:function(){this.items.items[0].setTitle(this.getTitle());this.getData()},config:{title:null,layout:"vbox",items:[com.getHeader(),{xtype:"container",layout:"hbox",items:[{xtype:"dataview",id:"theRiskData",width:216,height:300,listeners:{scope:this,itemclick:function(n,t){var i=this.down("grid").store;i.clearFilter();i.filter("riskSeverity",t.data.severity);i.filter("riskOccurrence",t.data.occurrence)}},singleSelect:!0,overItemCls:"x-view-over",itemSelector:".clickable",emptyText:"No data available",deferInitialRefresh:!1,data:[{severity:1,occurrence:1,count:9},{severity:1,occurrence:2,count:1},{severity:1,occurrence:3,count:0},{severity:1,occurrence:4,count:0},{severity:1,occurrence:5,count:0},{severity:2,occurrence:1,count:3},{severity:2,occurrence:2,count:4},{severity:2,occurrence:3,count:6},{severity:2,occurrence:4,count:4},{severity:2,occurrence:5,count:0},{severity:3,occurrence:1,count:15},{severity:3,occurrence:2,count:13},{severity:3,occurrence:3,count:28},{severity:3,occurrence:4,count:3},{severity:3,occurrence:5,count:0},{severity:4,occurrence:1,count:7},{severity:4,occurrence:2,count:8},{severity:4,occurrence:3,count:3},{severity:4,occurrence:4,count:2},{severity:4,occurrence:5,count:0},{severity:5,occurrence:1,count:7},{severity:5,occurrence:2,count:2},{severity:5,occurrence:3,count:2},{severity:5,occurrence:4,count:0},{severity:5,occurrence:5,count:2}],tpl:new Ext.XTemplate('<div class="matrix">','<tpl for=".">',"<div>{severity} is {occurrence} years old<\/div>","<\/tpl>",'<div class="filter">',"<span>Filters<\/span>","<ul>",'<li class="insignificant" data-e-value="insignificant">&nbsp;<\/li>','<li class="low" data-e-value="low">&nbsp;<\/li>','<li class="medium" data-e-value="medium">&nbsp;<\/li>','<li class="high" data-e-value="high">&nbsp;<\/li>','<li class="extreme" data-e-value="extreme">&nbsp;<\/li>',"<\/ul>","<\/div>","<\/div>",{disableFormats:!0,doVal:function(n,t,i){var u=Ext.getCmp("theRiskMatrix"),r="";return t===1&&(r=r+'<ul class="row">'),r=i===0?r+'<li data-e-value="'+u.theColors[n-1][t-1]+'" class="clickable '+u.theColors[n-1][t-1]+'">&nbsp;&nbsp;<\/li>':r+'<li data-e-value="'+u.theColors[n-1][t-1]+'" class="clickable '+u.theColors[n-1][t-1]+'">&nbsp;'+i+"&nbsp;<\/li>",t===5&&(r=r+"<\/ul>"),r}})}]}]},theColors:[["insignificant","low","low","low","medium"],["low","low","medium","medium","high"],["low","medium","medium","high","high"],["low","medium","high","high","extreme"],["medium","high","high","extreme","extreme"]],clickableColors:["insignificant","low","medium","high","extreme"],currColor:"high",currentSelection:{insignificant:!1,low:!1,medium:!1,high:!0,extreme:!0},getData:function(){var t=this,n="http://"+location.hostname+":8095/ProjectService.svc/json/GetRiskBurndown";$.ajax(com.ajaxObject(n,{type:1,projectId:97370})).done(function(n){var t=Ext.create("Ext.data.Store",{fields:["count","occurrence","severity"],data:n.Matrix});Ext.getCmp("theRiskData").setStore(t)}).fail(function(t){throw t.status+"-"+t.statusText+": "+n;})}});$(function(){$("body").on("click",".matrix .filter li",function(){var t=$(this).attr("data-e-value"),n=Ext.getCmp("dashboardPortletRiskMatrix");n.currentSelection[t]=!n.currentSelection[t];n.updateFilter(n)});$("body").on("click",".matrix ul.row li",function(){var t=$(this).attr("data-e-value");n();$(this).addClass("the-selected-"+t)});$("body").on("mouseover",".matrix .filter li",function(){var n=$(this).attr("data-e-value");$(".matrix ul.row li."+n).addClass("the-hover-"+n)}).on("mouseout",".matrix .filter li",function(){var n=$(this).attr("data-e-value");$(".matrix ul.row li."+n).removeClass("the-hover-"+n)});var n=function(){rm=Ext.getCmp("dashboardPortletRiskMatrix");for(var n in rm.currentSelection)rm.currentSelection[n]=!1;$(".matrix li").removeClass(function(n,t){var r=t.split(" "),i=[];return $.each(r,function(n,t){/the-selected.*/.test(t)&&i.push(t)}),i.join(" ")})}});
//# sourceMappingURL=Risks.min.js.map